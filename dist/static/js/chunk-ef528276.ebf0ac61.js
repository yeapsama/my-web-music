(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef528276"],{"40a1":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"song-table"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.songs,"empty-text":"数据加载中~","row-class-name":t.tableRowClassName},on:{"row-dblclick":t.playMusic}},[n("el-table-column",{attrs:{width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id==t.nowSongDetail.id?n("span",{staticClass:"iconfont",class:t.isPlaying?" icon-voice":"icon-jingyin_laba"}):n("span",[t._v(t._s(t._f("formatIndex")(t.pageIndex(e.row.index))))])]}}])}),n("el-table-column",{attrs:{width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"operation"},[n("span",{class:-1!==t.likeSongIds.indexOf(e.row.id)?"iconfont icon-xihuan2":"iconfont icon-xihuan",on:{click:function(n){return t.likeSong(e.row)}}}),n("span",{staticClass:"iconfont icon-xiazai",attrs:{title:"下载"}}),n("span",{staticClass:"el-icon-plus",attrs:{title:"添加到播放列表"},on:{click:function(n){return t.addSong(e.row)}}})])]}}])}),n("el-table-column",{attrs:{prop:"name",label:"歌曲",width:"300","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"songname"},[t._v(" "+t._s(e.row.name)+" "),1==e.row.fee?n("i",{staticClass:"iconfont icon-vip"}):t._e(),0!=e.row.mv?n("i",{staticClass:"iconfont icon-mv",on:{click:function(n){return t.toMvDetail(e.row.mv)}}}):t._e()])]}}])}),n("el-table-column",{attrs:{prop:"al.name",label:"专辑","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"sthover",on:{click:function(n){return t.toAlbum(e.row.al.id)}}},[t._v(" "+t._s(e.row.al.name)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"ar[0].name",label:"歌手","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"sthover",on:{click:function(n){return t.toSinger(e.row.ar[0].id)}}},[t._v(" "+t._s(e.row.ar[0].name)+" ")])]}}])}),n("el-table-column",{attrs:{prop:"dt",label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(" "+t._s(t._f("formatDuration")(e.row.dt))+" ")])]}}])})],1)],1)},s=[],i=n("5530"),o=(n("a9e3"),n("8725")),r=n("2f62"),c={name:"SongTable",props:{songs:{type:Array,default:function(){return[]}},songList:{type:Array,default:function(){return[]}},currentPageNum:{type:Number,default:function(){return-2}}},data:function(){return{islike:!1,currentIndex:null,pageNum:0}},created:function(){this.isLogin&&0===this.likeSongIds.length&&this.getUserLikSongs()},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(r["b"])(["isPlaying","nowSongDetail"])),Object(r["b"])("login",["isLogin","userInfo","userSongList","likeSongIds"])),{},{totalSongNum:function(){return this.songs.length}}),filters:{formatIndex:function(t){return t<9?"0"+(t+1):t+1}},methods:{playMusic:function(t){var e=this;Object(o["a"])(t.id).then((function(n){Object(o["e"])(t.id).then((function(t){e.$store.dispatch("saveSongUrl",t.data.data[0].url)})),e.$store.dispatch("changePlayState",!0),e.$store.dispatch("saveSongDetail",t),e.$store.dispatch("addPlayinglist",t)})).catch((function(t){e.$message({message:"暂时无法播放，换首试试",type:"warning",center:!0})}))},getUserLikSongs:function(){var t=this;Object(o["c"])(this.userInfo.userId).then((function(e){Array.isArray(e.data.ids)&&0!=e.data.ids.length&&t.$store.dispatch("login/saveLikeSongIds",e.data.ids)}))},likeSong:function(t){var e=this;if(this.$store.state.login.isLogin){var n=-1===this.likeSongIds.indexOf(t.id);this.userSongList[0].id!=this.$route.params.id?this.likeNowSongBy(t,n):this.$confirm("确定将选中歌曲从我喜欢的音乐中删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",confirmButtonClass:""}).then((function(){e.likeNowSongBy(t,n),e.$emit("updateSonglist")})).catch((function(t){}))}else this.$message({type:"warning",message:"登录后才能收藏",showClose:!0,center:!0})},likeNowSongBy:function(t,e){var n=this;Object(o["f"])(t.id,e).then((function(t){n.getUserLikSongs(),!0===e?(n.$message({message:"已添加到我喜欢的音乐",type:"success",center:!0}),n.islike=!0):(n.$message({message:"取消喜欢成功",type:"success",center:!0}),n.islike=!1)})).catch((function(t){n.$message.warning("操作失败,请重试")}))},addSong:function(t){this.$store.dispatch("addPlayinglist",t),this.$message({message:"已添加到播放列表",type:"success",center:!0})},toSinger:function(t){this.$router.push("/singerdetail/"+t)},toAlbum:function(t){this.$router.push("/albumdetail/"+t)},toMvDetail:function(t){this.$router.push({name:"VideoDetail",params:{id:t,type:"mv"}})},tableRowClassName:function(t){var e=t.row,n=t.rowIndex;if(e.index=n,n%2!==0)return"rowEven"},pageIndex:function(t){return-2===this.currentPageNum?t:48*(this.currentPageNum-1)+t}}},l=c,u=(n("9ddd"),n("2877")),d=Object(u["a"])(l,a,s,!1,null,"0ca9f2e5",null);e["a"]=d.exports},6137:function(t,e,n){},"8a6c":function(t,e,n){"use strict";n("abb3")},"9ddd":function(t,e,n){"use strict";n("6137")},abb3:function(t,e,n){},d529:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>t.pageSize,expression:"total > pageSize"}],attrs:{background:"","page-size":t.pageSize,layout:t.layout,total:t.total,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1)},s=[],i=(n("a9e3"),{name:"Pagination",props:{total:{required:!0,type:Number},pageSize:{required:!0,type:Number},currentPage:{type:Number,default:1},scrollTop:{type:Boolean,default:!0},layout:{type:String,default:"total, prev, pager, next"}},methods:{handleCurrentChange:function(t){if(this.$emit("handleCurrentChange",t),this.scrollTop){var e=document.querySelector(".view");e.scrollTop=0}}}}),o=i,r=n("2877"),c=Object(r["a"])(o,a,s,!1,null,"73995679",null);e["a"]=c.exports},e04f:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SongRes"},[n("div",{staticClass:"result"},[n("h3",[t._v(" 搜索"),n("span",[t._v(t._s(this.keywords))]),t._v(",找到"+t._s(t.songResCount)+"首单曲 ")]),0!==Object.keys(t.matchSinger).length||0!==Object.keys(t.matchAlbum).length?n("div",{staticClass:"match"},[n("h3",[t._v("最佳匹配")]),n("div",{staticClass:"goodMatch"},[0!==Object.keys(t.matchSinger).length?n("div",{staticClass:"matchitem",on:{click:t.goSingerdetail}},[n("div",{staticClass:"cover"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.matchSinger.img1v1Url,expression:"matchSinger.img1v1Url"}],attrs:{alt:""}})]),n("div",{staticClass:"iname"},[n("span",[t._v("歌手："+t._s(t.matchSinger.name))]),n("span",{staticClass:"iconfont icon-xiayiye"})])]):t._e(),0!==Object.keys(t.matchAlbum).length?n("div",{staticClass:"matchitem",on:{click:t.goAlbumdetail}},[n("div",{staticClass:"cover"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.matchAlbum.picUrl,expression:"matchAlbum.picUrl"}],attrs:{alt:""}})]),n("div",{staticClass:"iname"},[n("span",[t._v("专辑："+t._s(t.matchAlbum.name))]),n("span",{staticClass:"iconfont icon-xiayiye"})])]):t._e()])]):t._e()]),n("SongTable",{attrs:{songs:t.songRes}}),n("Pagination",{attrs:{total:t.songResCount,"page-size":50},on:{handleCurrentChange:t.getSearchSongBy}})],1)},s=[],i=n("5d4f"),o=n("d529"),r=n("40a1"),c={name:"SongRes",data:function(){return{keywords:"",songRes:[],songResCount:0,matchSinger:{},matchAlbum:{}}},components:{Pagination:o["a"],SongTable:r["a"]},created:function(){this.keywords=this.$route.params.keywords,this.getSearchSongBy(),this.getGoodMatchBy()},methods:{getSearchSongBy:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=50*(e-1);Object(i["c"])(this.keywords,n).then((function(e){t.songRes=e.data.result.songs,t.songResCount=e.data.result.songCount}))},getGoodMatchBy:function(){var t=this;Object(i["a"])(this.keywords).then((function(e){t.matchSinger=e.data.result.artist[0],t.matchAlbum=e.data.result.album[0]})).catch((function(t){return t}))},goSingerdetail:function(){this.$router.push("/singerdetail/"+this.matchSinger.id)},goAlbumdetail:function(){this.$router.push("/albumdetail/"+this.matchAlbum.id)}}},l=c,u=(n("8a6c"),n("2877")),d=Object(u["a"])(l,a,s,!1,null,"68c991c4",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-ef528276.ebf0ac61.js.map